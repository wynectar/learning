{"version":3,"file":"index.js","names":[],"sources":["../src/index.ts"],"sourcesContent":["const modules = {\n  'xmldom-sre': await import('@xmldom/xmldom'),\n  'wicked-good-xpath': await import('wicked-good-xpath'),\n  commander: {},\n  fs: {},\n} as const;\n\nconst require = <Key extends keyof typeof modules>(name: Key) => modules[name];\n\ndeclare global {\n  // MathJax attaches a custom loader that expects a CommonJS-like require.\n  var MathJax_require: typeof require;\n  var MathJax: any;\n}\n\nglobalThis.MathJax_require = require;\n\nconst lazyModules = {\n  'mathjax/es5/adaptors/liteDOM.js': () => import('mathjax/es5/adaptors/liteDOM.js'),\n  'xyjax/build/xypic.js': () => import('xyjax/build/xypic.js'),\n} as const;\n\nconst lazyRequire = (name: keyof typeof lazyModules) => lazyModules[name]();\n\nglobalThis.MathJax = {\n  loader: {\n    source: {},\n    require: lazyRequire,\n    load: [\n      \"adaptors/liteDOM\",\n      \"[custom]/xypic\"\n    ],\n    paths: {\n      mathjax: \"mathjax/es5\",\n      custom: \"xyjax/build\",\n    },\n  },\n  tex: {\n    packages: { \"[+]\": [ \"xypic\"] },\n  },\n  svg: {\n    fontCache: \"none\",\n  },\n  startup: {\n    typeset: false,\n  },\n};\n\nawait import('mathjax/es5/tex-svg-full.js');\nawait globalThis.MathJax.startup?.promise;\n\nexport interface Tex2SvgHtmlOptions {\n  display?: boolean;\n  [key: string]: unknown;\n}\n\nexport function tex2svgHtml(math = '', options: Tex2SvgHtmlOptions = {}) {\n  const node = globalThis.MathJax.tex2svg(math, { display: true, ...options });\n  const adaptor = globalThis.MathJax.startup.adaptor;\n  const style = adaptor.textContent(globalThis.MathJax.svgStylesheet());\n  const html = adaptor.outerHTML(node);\n  const id = `mjx-${Math.random().toString(16).substring(8)}`;\n  return `\n    <span id=\"${id}\">\n      <style>\n      #${id}{\n        display:contents;\n        mjx-assistive-mml {\n          user-select: text !important;\n          clip: auto !important;\n          color: rgba(0,0,0,0);\n        }\n        ${style}\n      }\n      </style>\n      ${html}\n    </span>\n  `;\n}\n"],"mappings":"sEAAA,MAAM,EAAU,CACd,aAAc,MAAM,OAAO,qBAAA,KAAA,EAAA,EAAA,CAAA,CAC3B,oBAAqB,MAAM,OAAO,sCAAA,KAAA,EAAA,EAAA,CAAA,CAClC,UAAW,EAAE,CACb,GAAI,EAAE,CACP,CAEK,EAA6C,GAAc,EAAQ,GAQzE,WAAW,gBAAkB,EAE7B,MAAM,EAAc,CAClB,sCAAyC,OAAO,yBAChD,2BAA8B,OAAO,uBACtC,CAEK,EAAe,GAAmC,EAAY,IAAO,CAE3E,WAAW,QAAU,CACnB,OAAQ,CACN,OAAQ,EAAE,CACV,QAAS,EACT,KAAM,CACJ,mBACA,iBACD,CACD,MAAO,CACL,QAAS,cACT,OAAQ,cACT,CACF,CACD,IAAK,CACH,SAAU,CAAE,MAAO,CAAE,QAAQ,CAAE,CAChC,CACD,IAAK,CACH,UAAW,OACZ,CACD,QAAS,CACP,QAAS,GACV,CACF,CAED,MAAM,OAAO,8BACb,MAAM,WAAW,QAAQ,SAAS,QAOlC,SAAgB,EAAY,EAAO,GAAI,EAA8B,EAAE,CAAE,CACvE,IAAM,EAAO,WAAW,QAAQ,QAAQ,EAAM,CAAE,QAAS,GAAM,GAAG,EAAS,CAAC,CACtE,EAAU,WAAW,QAAQ,QAAQ,QACrC,EAAQ,EAAQ,YAAY,WAAW,QAAQ,eAAe,CAAC,CAC/D,EAAO,EAAQ,UAAU,EAAK,CAC9B,EAAK,OAAO,KAAK,QAAQ,CAAC,SAAS,GAAG,CAAC,UAAU,EAAE,GACzD,MAAO;gBACO,EAAG;;SAEV,EAAG;;;;;;;UAOF,EAAM;;;QAGR,EAAK"}